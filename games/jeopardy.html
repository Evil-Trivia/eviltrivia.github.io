<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Evil Trivia - Jeopardy Study Tool</title>
  <script src="/js/components/autoload-banner.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Anton&family=Impact+Display&display=swap" rel="stylesheet">
  <!-- Korinna font for authentic Jeopardy styling -->
  <link rel="stylesheet" href="https://use.typekit.net/bvr3gvp.css"> <!-- Adobe Fonts (Korinna) -->
  <style>
    body {
      font-family: Arial, sans-serif;
      padding-top: 60px; /* Add space for the banner */
    }
    
    h1, h2, h3 {
      text-align: center;
      color: #333;
      margin-bottom: 20px;
      font-family: 'Arial Black', Arial, sans-serif;
      font-weight: 900;
    }
    
    .content-section {
      background: white;
      border-radius: 8px;
      padding: 30px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }
    
    .auth-message {
      text-align: center;
      padding: 50px;
      font-size: 18px;
      color: #666;
    }
    
    .btn {
      display: inline-block;
      background-color: #ffcc00;
      color: black;
      padding: 12px 24px;
      border-radius: 4px;
      text-decoration: none;
      font-weight: bold;
      border: none;
      cursor: pointer;
      font-size: 16px;
      margin-right: 10px;
      transition: background-color 0.3s;
      font-family: 'Arial Black', Arial, sans-serif;
      text-transform: uppercase;
    }
    
    .btn:hover {
      background-color: #e6b800;
    }
    
    .btn-patreon {
      background-color: #F96854;
      color: white;
    }
    
    .btn-patreon:hover {
      background-color: #e05c49;
    }
    
    .hidden {
      display: none;
    }
    
    .loader {
      border: 4px solid #f3f3f3;
      border-top: 4px solid #3498db;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      animation: spin 2s linear infinite;
      margin: 20px auto;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* Jeopardy-specific styles */
    .jeopardy-content {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    
    .stats-bar {
      display: flex;
      justify-content: space-between;
      width: 100%;
      background-color: #f0f0f0;
      padding: 10px 20px;
      border-radius: 8px;
      margin-bottom: 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .stat-item {
      text-align: center;
      padding: 0 15px;
    }
    
    .stat-label {
      font-size: 14px;
      color: #666;
      margin-bottom: 5px;
    }
    
    .stat-value {
      font-size: 20px;
      font-weight: bold;
      color: #333;
    }
    
    .question-container {
      width: 100%;
      background-color: #060CE9; /* Jeopardy blue */
      color: white;
      padding: 40px 30px;
      border-radius: 4px;
      margin-bottom: 20px;
      box-shadow: 0 6px 12px rgba(0,0,0,0.3), inset 0 0 10px rgba(255,255,255,0.2);
      min-height: 220px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      position: relative;
      border: 2px solid rgba(255,255,255,0.3);
      text-align: center;
      aspect-ratio: 16/9;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
    }
    
    .category-text {
      font-size: 28px;
      margin-bottom: 20px;
      text-transform: uppercase;
      letter-spacing: 2px;
      font-weight: bold;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
      font-family: korinna, serif;
    }
    
    .question-text {
      font-size: 36px;
      text-align: center;
      line-height: 1.4;
      font-family: korinna, serif;
      text-transform: uppercase;
      letter-spacing: 1px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    }
    
    .answer-text {
      font-size: 32px;
      text-align: center;
      margin-top: 20px;
      font-weight: bold;
      color: #FFCC33; /* Jeopardy gold */
      font-family: korinna, serif;
      text-transform: uppercase;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    }
    
    .value-display {
      position: absolute;
      top: 10px;
      right: 15px;
      background-color: #FFCC33;
      color: #060CE9;
      padding: 5px 10px;
      border-radius: 4px;
      font-weight: bold;
      font-size: 18px;
      font-family: 'Arial Black', Arial, sans-serif;
    }
    
    .controls-container {
      display: flex;
      justify-content: space-between;
      width: 100%;
      margin-bottom: 30px;
    }
    
    .buzz-btn {
      flex: 1;
      padding: 15px 30px;
      background-color: #e74c3c;
      color: white;
      font-size: 24px;
      font-weight: bold;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      margin-right: 20px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      transition: all 0.2s;
      font-family: korinna, serif;
      letter-spacing: 1px;
      border-bottom: 4px solid transparent;
      position: relative;
    }
    
    .buzz-btn:disabled {
      background-color: #95a5a6;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }
    
    .buzz-btn.buzz-ready {
      animation: pulse 1.5s infinite;
      border-bottom: 4px solid #ff0000;
    }
    
    .buzz-btn.buzzed-in {
      background-color: #27ae60;
      border-bottom: none;
      animation: none;
      box-shadow: inset 0 0 10px rgba(0,0,0,0.3);
      transform: translateY(2px);
    }
    
    .buzz-btn.buzzed-in::after {
      display: none;
    }
    
    /* Digital border effect for the buzz button */
    .buzz-btn.buzz-ready::after {
      content: '';
      position: absolute;
      bottom: -4px;
      left: 0;
      width: 100%;
      height: 4px;
      background: linear-gradient(90deg, 
        #ff0000 0%, #ff0000 20%, 
        #ff5e3a 20%, #ff5e3a 40%,
        #ff0000 40%, #ff0000 60%,
        #ff5e3a 60%, #ff5e3a 80%,
        #ff0000 80%, #ff0000 100%);
      animation: digitalBorder 0.5s infinite linear;
    }
    
    @keyframes digitalBorder {
      0% {
        background-position: 0 0;
      }
      100% {
        background-position: 20px 0;
      }
    }
    
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); background-color: #ff5e3a; }
      100% { transform: scale(1); }
    }
    
    .buzz-btn:hover {
      background-color: #c0392b;
      transform: translateY(-2px);
      box-shadow: 0 6px 8px rgba(0,0,0,0.15);
    }
    
    .action-btns {
      flex: 1;
      display: flex;
      justify-content: space-between;
    }
    
    .action-btn {
      padding: 15px 20px;
      border: none;
      border-radius: 8px;
      font-weight: bold;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.2s;
      font-family: 'Arial Black', Arial, sans-serif;
      text-transform: uppercase;
    }
    
    .reveal-btn {
      background-color: #ffcc00;
      color: black;
    }
    
    .reveal-btn:hover {
      background-color: #e6b800;
    }
    
    .next-btn {
      background-color: #ffcc00;
      color: black;
    }
    
    .next-btn:hover {
      background-color: #e6b800;
    }
    
    .result-buttons {
      display: flex;
      justify-content: center;
      margin-top: 20px;
      gap: 15px;
    }
    
    .result-btn {
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      font-weight: bold;
      cursor: pointer;
      font-family: 'Arial Black', Arial, sans-serif;
      text-transform: uppercase;
    }
    
    .correct-btn {
      background-color: #2ecc71;
      color: white;
    }
    
    .correct-btn:hover {
      background-color: #27ae60;
    }
    
    .wrong-btn {
      background-color: #e74c3c;
      color: white;
    }
    
    .wrong-btn:hover {
      background-color: #c0392b;
    }
    
    .pass-btn {
      background-color: #95a5a6;
      color: white;
    }
    
    .pass-btn:hover {
      background-color: #7f8c8d;
    }
    
    .categories-section {
      margin-top: 30px;
      width: 100%;
    }
    
    .categories-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 15px;
      margin-top: 15px;
    }
    
    .category-group {
      background-color: #f9f9f9;
      border-radius: 8px;
      padding: 15px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    
    .category-group h4 {
      margin-top: 0;
      margin-bottom: 10px;
      font-size: 16px;
      color: #333;
      border-bottom: 1px solid #ddd;
      padding-bottom: 5px;
    }
    
    .category-checkbox {
      margin-bottom: 8px;
    }
    
    /* Responsive styles */
    @media (max-width: 768px) {
      .controls-container {
        flex-direction: column;
      }
      
      .buzz-btn {
        margin-right: 0;
        margin-bottom: 15px;
      }
      
      .stats-bar {
        flex-wrap: wrap;
      }
      
      .stat-item {
        flex: 1 0 50%;
        margin-bottom: 10px;
      }
    }
    
    .game-selection-section {
      margin-bottom: 30px;
      width: 100%;
    }
    
    .game-selection-container {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      align-items: flex-end;
      margin-top: 20px;
      justify-content: center;
    }
    
    .date-selection {
      flex: 1;
      min-width: 200px;
      max-width: 400px;
    }
    
    .select-dropdown {
      width: 100%;
      padding: 10px;
      border-radius: 4px;
      border: 1px solid #ddd;
      background-color: #f9f9f9;
      font-size: 16px;
      font-family: Arial, sans-serif;
    }
    
    .select-dropdown:disabled {
      background-color: #eee;
      color: #999;
    }
    
    .jeopardy-header {
      color: #ffcc00;
      font-family: korinna, serif;
      font-size: 40px;
      text-transform: uppercase;
      letter-spacing: 2px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }
    
    /* Settings Modal Styles */
    .modal {
      display: flex;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.7);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }
    
    .modal-content {
      background-color: white;
      border-radius: 8px;
      width: 90%;
      max-width: 600px;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 4px 20px rgba(0,0,0,0.2);
    }
    
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      border-bottom: 1px solid #ddd;
    }
    
    .modal-header h3 {
      margin: 0;
      color: #333;
    }
    
    .close-modal {
      font-size: 28px;
      font-weight: bold;
      color: #aaa;
      cursor: pointer;
    }
    
    .close-modal:hover {
      color: #333;
    }
    
    .modal-body {
      padding: 20px;
    }
    
    .settings-section {
      margin-bottom: 30px;
    }
    
    .settings-section h4 {
      margin-top: 0;
      margin-bottom: 15px;
      color: #333;
      border-bottom: 1px solid #eee;
      padding-bottom: 10px;
    }
    
    .stats-display {
      background-color: #f9f9f9;
      border-radius: 8px;
      padding: 15px;
    }
    
    .stat-row {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px solid #eee;
    }
    
    .stat-row:last-child {
      border-bottom: none;
    }
    
    .settings-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 15px;
    }
    
    .btn-danger {
      background-color: #e74c3c;
      color: white;
    }
    
    .btn-danger:hover {
      background-color: #c0392b;
    }
    
    .settings-btn {
      background-color: #3498db;
      color: white;
    }
    
    .settings-btn:hover {
      background-color: #2980b9;
    }
    
    /* Advanced Stats Styles */
    .advanced-stats {
      background-color: #f9f9f9;
      border-radius: 8px;
      padding: 15px;
      margin-top: 10px;
      max-height: 300px;
      overflow-y: auto;
    }
    
    .stats-category, .stats-value {
      margin-bottom: 10px;
      padding-bottom: 10px;
      border-bottom: 1px solid #eee;
    }
    
    .stats-category:last-child, .stats-value:last-child {
      border-bottom: none;
    }
    
    .category-name, .value-name {
      font-weight: bold;
      margin-bottom: 5px;
    }
    
    .progress-bar-container {
      height: 8px;
      background-color: #ecf0f1;
      border-radius: 4px;
      overflow: hidden;
      margin-top: 5px;
    }
    
    .progress-bar {
      height: 100%;
      background-color: #2ecc71;
    }
    
    .accuracy-text {
      font-size: 14px;
      color: #666;
      margin-top: 3px;
    }
    
    .loading-stats {
      padding: 20px;
      text-align: center;
      color: #7f8c8d;
    }
    
    details summary {
      cursor: pointer;
      padding: 10px;
      background-color: #ecf0f1;
      border-radius: 4px;
      margin-bottom: 5px;
    }
    
    details summary:hover {
      background-color: #dfe4e6;
    }
    
    /* Main Menu Styles */
    .main-menu-section {
      text-align: center;
      padding: 20px;
      margin-bottom: 30px;
    }
    
    .menu-buttons {
      display: flex;
      flex-direction: column;
      gap: 15px;
      max-width: 400px;
      margin: 30px auto;
    }
    
    .menu-btn {
      font-size: 18px;
      padding: 15px 30px;
    }
    
    .menu-btn:disabled {
      background-color: #ccc;
      cursor: not-allowed;
      color: #999;
    }
    
    /* Ready Screen Styles */
    .ready-screen-section {
      text-align: center;
      padding: 20px;
    }
    
    .ready-screen-container {
      background-color: #f9f9f9;
      border-radius: 8px;
      padding: 30px;
      max-width: 600px;
      margin: 20px auto;
    }
    
    .ready-info {
      margin-bottom: 30px;
    }
    
    .start-game-btn {
      background-color: #27ae60;
      color: white;
      font-size: 20px;
      padding: 15px 40px;
    }
    
    .start-game-btn:hover {
      background-color: #219955;
    }
    
    /* Game End Styles */
    .game-summary-container {
      background-color: #f9f9f9;
      border-radius: 8px;
      padding: 25px;
      max-width: 700px;
      margin: 20px auto;
    }
    
    .summary-stats {
      margin-bottom: 30px;
    }
    
    .summary-stat-row {
      display: flex;
      justify-content: space-between;
      padding: 10px 0;
      border-bottom: 1px solid #eee;
    }
    
    .summary-stat-row.highlight {
      font-size: 24px;
      font-weight: bold;
      color: #27ae60;
      margin-top: 15px;
      border-top: 2px solid #ddd;
      border-bottom: none;
    }
    
    .comparison-stats {
      margin-top: 30px;
      margin-bottom: 30px;
    }
    
    .comparison-chart {
      margin-top: 15px;
    }
    
    .comparison-item {
      margin-bottom: 20px;
    }
    
    .comparison-label {
      margin-bottom: 5px;
      font-weight: bold;
    }
    
    .comparison-bars {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }
    
    .comparison-this-game, .comparison-overall {
      height: 15px;
      border-radius: 4px;
    }
    
    .comparison-this-game {
      background-color: #3498db;
    }
    
    .comparison-overall {
      background-color: #95a5a6;
    }
    
    .comparison-values {
      display: flex;
      justify-content: space-between;
      margin-top: 5px;
      font-size: 14px;
      color: #666;
    }
    
    .end-game-actions {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-top: 30px;
    }
    
    /* Add buzz-in indicator animation */
    .question-container.buzz-ready {
      animation: buzzReadyPulse 1.5s infinite;
      box-shadow: 0 6px 12px rgba(255,204,51,0.5), inset 0 0 10px rgba(255,255,255,0.3);
      border: 2px solid #FFCC33;
    }
    
    @keyframes buzzReadyPulse {
      0% { box-shadow: 0 6px 12px rgba(255,204,51,0.3), inset 0 0 10px rgba(255,255,255,0.2); }
      50% { box-shadow: 0 6px 20px rgba(255,204,51,0.8), inset 0 0 15px rgba(255,255,255,0.4); }
      100% { box-shadow: 0 6px 12px rgba(255,204,51,0.3), inset 0 0 10px rgba(255,255,255,0.2); }
    }
    
    /* Responsive styles for new sections */
    @media (max-width: 768px) {
      .menu-buttons {
        width: 100%;
      }
      
      .comparison-stats {
        font-size: 14px;
      }
      
      .end-game-actions {
        flex-direction: column;
      }
    }
    
    /* Modal styles */
    .modal {
      display: none;
      position: fixed;
      z-index: 999;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0, 0, 0, 0.7);
    }
    
    .modal-content {
      background-color: #121212;
      margin: 5% auto;
      padding: 20px;
      border: 1px solid #0288d1;
      border-radius: 8px;
      width: 80%;
      max-width: 800px;
      max-height: 80vh;
      overflow-y: auto;
      color: #e0e0e0;
    }
    
    .close {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
    }
    
    .close:hover,
    .close:focus {
      color: #fff;
      text-decoration: none;
    }
    
    /* Category tables and tabs */
    .category-stats-container {
      margin-top: 30px;
    }
    
    .tabs {
      display: flex;
      border-bottom: 1px solid #0288d1;
      margin-bottom: 15px;
      overflow-x: auto;
    }
    
    .tab-button {
      background-color: transparent;
      color: #e0e0e0;
      border: none;
      padding: 10px 20px;
      cursor: pointer;
      font-size: 16px;
      transition: all 0.3s;
      border-bottom: 3px solid transparent;
    }
    
    .tab-button:hover {
      background-color: rgba(2, 136, 209, 0.2);
    }
    
    .tab-button.active {
      border-bottom: 3px solid #0288d1;
      font-weight: bold;
    }
    
    .tab-content {
      display: none;
      padding: 15px 0;
    }
    
    .tab-content.active {
      display: block;
    }
    
    .category-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    
    .category-table th, .category-table td {
      padding: 8px 12px;
      text-align: left;
      border-bottom: 1px solid #333;
    }
    
    .category-table th {
      background-color: #1A1A1A;
      color: #0288d1;
      font-weight: bold;
    }
    
    .category-table tr:nth-child(even) {
      background-color: #1E1E1E;
    }
    
    .category-table tr:hover {
      background-color: #2A2A2A;
    }
    
    /* Offline Mode Styles */
    .offline-banner {
      position: fixed;
      top: 60px;
      left: 0;
      width: 100%;
      background-color: #3498db;
      color: white;
      text-align: center;
      padding: 10px;
      font-weight: bold;
      z-index: 1000;
      display: none;
    }
    
    .offline-banner.offline {
      background-color: #e74c3c;
    }
    
    .offline-banner.sync {
      background-color: #f39c12;
    }
    
    .offline-status {
      display: inline-block;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      margin-right: 5px;
    }
    
    .offline-status.online {
      background-color: #2ecc71;
    }
    
    .offline-status.offline {
      background-color: #e74c3c;
    }
    
    .offline-progress {
      height: 5px;
      width: 100%;
      background-color: rgba(0,0,0,0.1);
      margin-top: 5px;
      border-radius: 2px;
      overflow: hidden;
      display: none;
    }
    
    .offline-progress-bar {
      height: 100%;
      background-color: #2ecc71;
      width: 0%;
      transition: width 0.3s;
    }
    
    .offline-action-btn {
      background-color: white;
      color: #3498db;
      border: none;
      padding: 5px 10px;
      border-radius: 3px;
      margin-left: 10px;
      cursor: pointer;
      font-weight: bold;
    }
    
    .offline-action-btn:hover {
      background-color: #f1f1f1;
    }
    
    .offline-action-btn.disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
  </style>
</head>
<body>
  <div class="game-container">
    <header>
      <h1 class="game-title">Evil Trivia: Jeopardy</h1>
      <div class="score-container">Score: <span id="score-display">$0</span></div>
      <button id="new-game-btn" class="btn">New Game</button>
      <button id="stats-toggle-btn" class="btn">Show Stats</button>
    </header>
    
    <div id="game-board" class="game-board">
      <!-- Game board will be dynamically generated here -->
    </div>
    
    <!-- Question Modal -->
    <div id="question-modal" class="modal hidden">
      <div class="modal-content">
        <p id="question-text"></p>
        <form id="answer-form">
          <input type="text" id="answer-input" placeholder="Your answer">
          <div class="modal-buttons">
            <button type="submit" class="btn submit-btn">Submit</button>
            <button type="button" id="pass-btn" class="btn pass-btn">Pass</button>
          </div>
        </form>
      </div>
    </div>
    
    <!-- Result Modal -->
    <div id="result-modal" class="modal hidden">
      <div class="modal-content">
        <h2 id="result-message"></h2>
        <p id="correct-answer-text"></p>
      </div>
    </div>
    
    <!-- Stats Panel -->
    <div id="stats-panel" class="stats-panel hidden">
      <h2>Game Statistics</h2>
      <button id="close-stats-btn" class="close-btn">Ã—</button>
      <div class="stats-content">
        <div class="stat-item">
          <div class="stat-label">Total Score:</div>
          <div class="stat-value" id="total-score">$0</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">Correct Answers:</div>
          <div class="stat-value" id="correct-answers">0</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">Questions Attempted:</div>
          <div class="stat-value" id="questions-attempted">0</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">Accuracy Rate:</div>
          <div class="stat-value" id="accuracy-rate">0%</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">Total Play Time:</div>
          <div class="stat-value" id="total-play-time">0 mins</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Game state
    let gameState = {
      score: 0,
      currentCategory: null,
      currentQuestion: null,
      answeredQuestions: {},
      gameStartTime: null,
      stats: {
        correctAnswers: 0,
        questionsAttempted: 0,
        totalPlayTime: 0
      }
    };

    // Sample categories and questions for the game
    const gameData = {
      categories: [
        {
          id: "science",
          title: "Science",
          questions: [
            { value: 200, question: "This element has the atomic number 1", answer: "hydrogen" },
            { value: 400, question: "The study of the composition, structure, and properties of matter is called this", answer: "chemistry" },
            { value: 600, question: "This force holds the nucleus of an atom together", answer: "strong nuclear force" },
            { value: 800, question: "This scientist formulated the theory of relativity", answer: "einstein" },
            { value: 1000, question: "This acid is found in lemons and oranges", answer: "citric acid" }
          ]
        },
        {
          id: "history",
          title: "History",
          questions: [
            { value: 200, question: "This document begins with 'We the People'", answer: "constitution" },
            { value: 400, question: "This ancient wonder was built as a tomb for Pharaoh Khufu", answer: "great pyramid of giza" },
            { value: 600, question: "This treaty ended World War I", answer: "treaty of versailles" },
            { value: 800, question: "The Cuban Missile Crisis occurred during this decade", answer: "1960s" },
            { value: 1000, question: "This civilization built Machu Picchu", answer: "inca" }
          ]
        },
        {
          id: "geography",
          title: "Geography",
          questions: [
            { value: 200, question: "This mountain is the tallest in the world", answer: "mount everest" },
            { value: 400, question: "This is the largest ocean on Earth", answer: "pacific ocean" },
            { value: 600, question: "This African country is known as the 'Cradle of Humanity'", answer: "ethiopia" },
            { value: 800, question: "This European capital city sits on the River Thames", answer: "london" },
            { value: 1000, question: "This strait separates Asia and North America", answer: "bering strait" }
          ]
        },
        {
          id: "entertainment",
          title: "Entertainment",
          questions: [
            { value: 200, question: "This 1997 film featured Leonardo DiCaprio and Kate Winslet on a doomed ship", answer: "titanic" },
            { value: 400, question: "This TV show features dragons and is based on books by George R.R. Martin", answer: "game of thrones" },
            { value: 600, question: "This British band performed 'Bohemian Rhapsody'", answer: "queen" },
            { value: 800, question: "This director is known for films like 'Pulp Fiction' and 'Kill Bill'", answer: "quentin tarantino" },
            { value: 1000, question: "This Broadway musical tells the story of Alexander Hamilton", answer: "hamilton" }
          ]
        },
        {
          id: "sports",
          title: "Sports",
          questions: [
            { value: 200, question: "This sport uses a shuttlecock", answer: "badminton" },
            { value: 400, question: "This competition happens every four years and features winter sports", answer: "winter olympics" },
            { value: 600, question: "In this sport, a 'grand slam' means winning four major tournaments in a year", answer: "tennis" },
            { value: 800, question: "This NFL quarterback has won the most Super Bowl titles", answer: "tom brady" },
            { value: 1000, question: "This martial art developed in Brazil and means 'gentle art'", answer: "brazilian jiu jitsu" }
          ]
        },
        {
          id: "literature",
          title: "Literature",
          questions: [
            { value: 200, question: "This author wrote 'Pride and Prejudice'", answer: "jane austen" },
            { value: 400, question: "This Shakespeare play features the line 'To be, or not to be'", answer: "hamlet" },
            { value: 600, question: "This novel by George Orwell features a dystopian society with Big Brother", answer: "1984" },
            { value: 800, question: "This author created the detective Sherlock Holmes", answer: "arthur conan doyle" },
            { value: 1000, question: "This epic poem begins 'Sing, O goddess, the anger of Achilles'", answer: "the iliad" }
          ]
        }
      ]
    };

    // Initialize the game
    function initializeGame() {
      createGameBoard();
      gameState.gameStartTime = new Date();
      gameState.score = 0;
      gameState.answeredQuestions = {};
      gameState.stats = {
        correctAnswers: 0,
        questionsAttempted: 0,
        totalPlayTime: 0
      };
      updateScoreDisplay();
    }

    // Create the game board with categories and questions
    function createGameBoard() {
      const gameBoard = document.getElementById('game-board');
      gameBoard.innerHTML = '';

      // Create category headers
      const headerRow = document.createElement('div');
      headerRow.className = 'board-row category-row';
      
      gameData.categories.forEach(category => {
        const categoryHeader = document.createElement('div');
        categoryHeader.className = 'category-header';
        categoryHeader.setAttribute('data-category', category.id);
        categoryHeader.textContent = category.title;
        categoryHeader.onclick = () => selectCategory(category.id);
        headerRow.appendChild(categoryHeader);
      });
      
      gameBoard.appendChild(headerRow);

      // Create question values
      const values = [200, 400, 600, 800, 1000];
      
      values.forEach(value => {
        const valueRow = document.createElement('div');
        valueRow.className = 'board-row value-row';
        
        gameData.categories.forEach(category => {
          const questionCell = document.createElement('div');
          questionCell.className = 'question-cell';
          questionCell.setAttribute('data-category', category.id);
          questionCell.setAttribute('data-value', value);
          questionCell.textContent = '$' + value;
          
          // Check if question has been answered
          const questionKey = `${category.id}-${value}`;
          if (gameState.answeredQuestions[questionKey]) {
            questionCell.classList.add('answered');
          }
          
          questionCell.onclick = () => selectQuestion(category.id, value);
          valueRow.appendChild(questionCell);
        });
        
        gameBoard.appendChild(valueRow);
      });

      // Add CSS for the game board
      const style = document.createElement('style');
      style.textContent = `
        .game-board {
          display: flex;
          flex-direction: column;
          gap: 5px;
          margin: 20px auto;
          max-width: 900px;
        }
        
        .board-row {
          display: flex;
          gap: 5px;
        }
        
        .category-header, .question-cell {
          flex: 1;
          text-align: center;
          padding: 15px 10px;
          border-radius: 5px;
          cursor: pointer;
          transition: all 0.2s;
        }
        
        .category-header {
          background-color: #060CE9;
          color: white;
          font-weight: bold;
          min-height: 60px;
          display: flex;
          justify-content: center;
          align-items: center;
          font-family: korinna, serif;
          text-transform: uppercase;
        }
        
        .category-header:hover, .category-header.selected {
          background-color: #0000A0;
          transform: scale(1.02);
        }
        
        .question-cell {
          background-color: #060CE9;
          color: #FFCC33;
          font-weight: bold;
          font-size: 24px;
          min-height: 80px;
          display: flex;
          justify-content: center;
          align-items: center;
          font-family: 'Arial Black', Arial, sans-serif;
        }
        
        .question-cell:hover {
          background-color: #0000A0;
          transform: scale(1.02);
        }
        
        .question-cell.answered {
          background-color: #333366;
          color: #777;
          cursor: not-allowed;
        }
        
        @media (max-width: 768px) {
          .category-header, .question-cell {
            padding: 10px 5px;
            font-size: 14px;
          }
          
          .question-cell {
            font-size: 18px;
          }
        }
      `;
      document.head.appendChild(style);
    }

    // Select a category
    function selectCategory(categoryId) {
      // Remove selected class from all categories
      document.querySelectorAll('.category-header').forEach(header => {
        header.classList.remove('selected');
      });
      
      // Add selected class to the clicked category
      const categoryHeader = document.querySelector(`.category-header[data-category="${categoryId}"]`);
      if (categoryHeader) {
        categoryHeader.classList.add('selected');
      }
      
      gameState.currentCategory = categoryId;
    }

    // Select a question
    function selectQuestion(categoryId, value) {
      // Check if question has already been answered
      const questionKey = `${categoryId}-${value}`;
      if (gameState.answeredQuestions[questionKey]) {
        return;
      }
      
      // Find the question data
      const category = gameData.categories.find(cat => cat.id === categoryId);
      if (!category) return;
      
      const question = category.questions.find(q => q.value === value);
      if (!question) return;
      
      // Set current question
      gameState.currentQuestion = {
        categoryId,
        value,
        question: question.question,
        answer: question.answer,
        categoryTitle: category.title
      };
      
      // Show question modal
      const questionModal = document.getElementById('question-modal');
      const questionText = document.getElementById('question-text');
      const answerInput = document.getElementById('answer-input');
      
      questionText.innerHTML = `
        <div class="modal-category">${category.title} - $${value}</div>
        <div class="modal-question">${question.question}</div>
      `;
      
      answerInput.value = '';
      questionModal.classList.remove('hidden');
      
      // Add CSS for modal
      const style = document.createElement('style');
      style.textContent = `
        .modal-category {
          font-size: 18px;
          color: #FFCC33;
          margin-bottom: 15px;
        }
        
        .modal-question {
          font-size: 24px;
          margin-bottom: 20px;
        }
        
        #answer-input {
          width: 100%;
          padding: 10px;
          font-size: 18px;
          margin-bottom: 15px;
          border: 2px solid #0288d1;
          background-color: #1E1E1E;
          color: white;
          border-radius: 4px;
        }
        
        .modal-buttons {
          display: flex;
          justify-content: space-between;
          gap: 10px;
        }
        
        .submit-btn, .pass-btn {
          flex: 1;
        }
      `;
      document.head.appendChild(style);
      
      // Focus on the answer input
      setTimeout(() => {
        answerInput.focus();
      }, 100);
    }

    // Submit an answer
    function submitAnswer(answer) {
      if (!gameState.currentQuestion) return;
      
      const userAnswer = answer.trim().toLowerCase();
      const correctAnswer = gameState.currentQuestion.answer.toLowerCase();
      const isCorrect = userAnswer === correctAnswer;
      
      // Update game stats
      gameState.stats.questionsAttempted++;
      
      if (isCorrect) {
        gameState.score += gameState.currentQuestion.value;
        gameState.stats.correctAnswers++;
      } else {
        gameState.score -= gameState.currentQuestion.value;
      }
      
      // Mark question as answered
      const questionKey = `${gameState.currentQuestion.categoryId}-${gameState.currentQuestion.value}`;
      gameState.answeredQuestions[questionKey] = true;
      
      // Update the UI
      updateScoreDisplay();
      
      // Show the result modal
      showResultModal(isCorrect, correctAnswer);
      
      // Hide the question modal
      const questionModal = document.getElementById('question-modal');
      questionModal.classList.add('hidden');
      
      // Update the game board
      const questionCell = document.querySelector(
        `.question-cell[data-category="${gameState.currentQuestion.categoryId}"][data-value="${gameState.currentQuestion.value}"]`
      );
      
      if (questionCell) {
        questionCell.classList.add('answered');
      }
    }

    // Pass a question
    function passQuestion() {
      if (!gameState.currentQuestion) return;
      
      // Update game stats
      gameState.stats.questionsAttempted++;
      
      // Mark question as answered
      const questionKey = `${gameState.currentQuestion.categoryId}-${gameState.currentQuestion.value}`;
      gameState.answeredQuestions[questionKey] = true;
      
      // Show the result modal with the correct answer
      showResultModal(false, gameState.currentQuestion.answer, true);
      
      // Hide the question modal
      const questionModal = document.getElementById('question-modal');
      questionModal.classList.add('hidden');
      
      // Update the game board
      const questionCell = document.querySelector(
        `.question-cell[data-category="${gameState.currentQuestion.categoryId}"][data-value="${gameState.currentQuestion.value}"]`
      );
      
      if (questionCell) {
        questionCell.classList.add('answered');
      }
    }

    // Update the score display
    function updateScoreDisplay() {
      const scoreDisplay = document.getElementById('score-display');
      scoreDisplay.textContent = '$' + gameState.score;
      
      // Update stats panel
      document.getElementById('total-score').textContent = '$' + gameState.score;
      document.getElementById('correct-answers').textContent = gameState.stats.correctAnswers;
      document.getElementById('questions-attempted').textContent = gameState.stats.questionsAttempted;
      
      // Calculate accuracy rate
      const accuracyRate = gameState.stats.questionsAttempted > 0 
        ? Math.round((gameState.stats.correctAnswers / gameState.stats.questionsAttempted) * 100) 
        : 0;
      document.getElementById('accuracy-rate').textContent = accuracyRate + '%';
      
      // Calculate play time
      const now = new Date();
      const playTimeInMinutes = Math.floor((now - gameState.gameStartTime) / (1000 * 60));
      document.getElementById('total-play-time').textContent = playTimeInMinutes + ' mins';
    }

    // Show the result modal
    function showResultModal(isCorrect, correctAnswer, isPassed = false) {
      const resultModal = document.getElementById('result-modal');
      const resultMessage = document.getElementById('result-message');
      const correctAnswerText = document.getElementById('correct-answer-text');
      
      if (isPassed) {
        resultMessage.textContent = 'Question Passed';
        resultMessage.style.color = '#f39c12';
      } else if (isCorrect) {
        resultMessage.textContent = 'Correct!';
        resultMessage.style.color = '#2ecc71';
      } else {
        resultMessage.textContent = 'Incorrect';
        resultMessage.style.color = '#e74c3c';
      }
      
      correctAnswerText.textContent = `The correct answer is: ${correctAnswer}`;
      resultModal.classList.remove('hidden');
      
      // Close result modal after 2 seconds
      setTimeout(() => {
        resultModal.classList.add('hidden');
      }, 2000);
    }

    // Start a new game
    function startNewGame() {
      // Reset game state
      gameState = {
        score: 0,
        currentCategory: null,
        currentQuestion: null,
        answeredQuestions: {},
        gameStartTime: new Date(),
        stats: {
          correctAnswers: 0,
          questionsAttempted: 0,
          totalPlayTime: 0
        }
      };
      
      // Create new game board
      createGameBoard();
      
      // Update score display
      updateScoreDisplay();
      
      // Hide modals
      document.getElementById('question-modal').classList.add('hidden');
      document.getElementById('result-modal').classList.add('hidden');
      document.getElementById('stats-panel').classList.add('hidden');
    }

    // Set up event listeners
    function setupEventListeners() {
      // Answer form submission
      const answerForm = document.getElementById('answer-form');
      answerForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const answerInput = document.getElementById('answer-input');
        submitAnswer(answerInput.value);
      });
      
      // Pass button
      const passBtn = document.getElementById('pass-btn');
      passBtn.addEventListener('click', () => {
        passQuestion();
      });
      
      // New game button
      const newGameBtn = document.getElementById('new-game-btn');
      newGameBtn.addEventListener('click', () => {
        startNewGame();
      });
      
      // Stats toggle button
      const statsToggleBtn = document.getElementById('stats-toggle-btn');
      statsToggleBtn.addEventListener('click', () => {
        const statsPanel = document.getElementById('stats-panel');
        statsPanel.classList.toggle('hidden');
        updateScoreDisplay(); // Update stats when panel is shown
      });
      
      // Close stats button
      const closeStatsBtn = document.getElementById('close-stats-btn');
      closeStatsBtn.addEventListener('click', () => {
        const statsPanel = document.getElementById('stats-panel');
        statsPanel.classList.add('hidden');
      });
      
      // Keyboard shortcuts
      document.addEventListener('keydown', (e) => {
        // Escape key closes modals
        if (e.key === 'Escape') {
          document.getElementById('question-modal').classList.add('hidden');
          document.getElementById('result-modal').classList.add('hidden');
          document.getElementById('stats-panel').classList.add('hidden');
        }
      });
    }

    // Initialize the game when the DOM is loaded
    document.addEventListener('DOMContentLoaded', () => {
      initializeGame();
      setupEventListeners();
    });
  </script>
</body>
</html> 